# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è INTECA

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Supabase](#—Å–æ–∑–¥–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
3. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö](#–º–∏–≥—Ä–∞—Ü–∏—è-–¥–∞–Ω–Ω—ã—Ö)
5. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–∑–∞–≥—Ä—É–∑–∫–∏)

---

## üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Supabase

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ
3. –ù–∞–∂–º–∏—Ç–µ **"New Project"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   - **Name**: inteca-website
   - **Database Password**: —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º —Ä–µ–≥–∏–æ–Ω
5. –ù–∞–∂–º–∏—Ç–µ **"Create new project"**

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π API

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Project URL** (URL –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)
   - **anon public** –∫–ª—é—á

---

## üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 1: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏

1. –í –ø–∞–Ω–µ–ª–∏ Supabase –æ—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor**
2. –ù–∞–∂–º–∏—Ç–µ **"New query"**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase-schema.sql`
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –Ω–∞–∂–º–∏—Ç–µ **Run**

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- ‚úÖ –¢–∞–±–ª–∏—Ü—É `site_content` –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–∞–π—Ç–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü—É `blog_posts` –¥–ª—è –ø–æ—Å—Ç–æ–≤ –±–ª–æ–≥–∞
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ Full-text search –¥–ª—è –±–ª–æ–≥–∞
- ‚úÖ Row Level Security (RLS) –ø–æ–ª–∏—Ç–∏–∫–∏
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è auto-update timestamp
- ‚úÖ –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü

–í —Ä–∞–∑–¥–µ–ª–µ **Table Editor** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã:
- `site_content` - 1 —Å—Ç—Ä–æ–∫–∞ —Å –∫–ª—é—á–æ–º "site_content"
- `blog_posts` - –ø–æ–∫–∞ –ø—É—Å—Ç–∞—è (–ø–æ—Å—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É)

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cd /Users/ruslan/Programming/inteca
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ –∫–ª—é—á–∏:

```env
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –§–∞–π–ª `.env` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` - –æ–Ω –Ω–µ –ø–æ–ø–∞–¥–µ—Ç –≤ Git

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:
- `@supabase/supabase-js` - –∫–ª–∏–µ–Ω—Ç Supabase
- `@tanstack/react-query` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–∞
- `@tanstack/react-query-devtools` - devtools –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npm run dev
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ localStorage, –∏—Ö –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ localStorage
const siteContent = localStorage.getItem('inteca_site_content')
const blogPosts = localStorage.getItem('inteca_blog_posts')

console.log('Site Content:', siteContent)
console.log('Blog Posts:', blogPosts)
```

4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ JSON –¥–∞–Ω–Ω—ã–µ
5. –í Supabase Table Editor:
   - –î–ª—è `site_content`: –æ–±–Ω–æ–≤–∏—Ç–µ –ø–æ–ª–µ `data` –≤ —Å—Ç—Ä–æ–∫–µ —Å key="site_content"
   - –î–ª—è `blog_posts`: –≤—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∂–¥—ã–π –ø–æ—Å—Ç –∫–∞–∫ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É

### –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

–ü—Ä–æ—â–µ –≤—Å–µ–≥–æ:
1. –ó–∞–π–¥–∏—Ç–µ –≤ `/admin`
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—É—é —Å–µ–∫—Ü–∏—é
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" - –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Supabase

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

### –ö–∞–∫ –º—ã —Ä–µ—à–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É –∑–∞–≥—Ä—É–∑–∫–∏:

#### 1. **React Query –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**

```typescript
// –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5-10 –º–∏–Ω—É—Ç
staleTime: 5 * 60 * 1000  // –î–∞–Ω–Ω—ã–µ "—Å–≤–µ–∂–∏–µ" 5 –º–∏–Ω—É—Ç
gcTime: 10 * 60 * 1000     // –•—Ä–∞–Ω—è—Ç—Å—è –≤ –∫—ç—à–µ 10 –º–∏–Ω—É—Ç
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏: –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏: –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞ (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ñ–æ–Ω–µ

#### 2. **Stale-While-Revalidate**

```typescript
placeholderData: (previousData) => previousData
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) –¥–∞–Ω–Ω—ã–µ
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–≤–µ–∂–∏–µ
- –û–±–Ω–æ–≤–ª—è–µ–º UI —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø—Ä–∏—à–ª–∏ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!

#### 3. **–î–≤–æ–π–Ω–æ–π Fallback**

```typescript
// 1. Supabase (–æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫)
const data = await supabase.from('site_content').select()

// 2. localStorage (–∫—ç—à –¥–ª—è offline)
localStorage.setItem('cache', JSON.stringify(data))

// 3. –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –æ–±–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç)
return data || cached || defaultContent
```

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ Supabase
2. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí –±–µ—Ä–µ–º –∏–∑ localStorage –∫—ç—à–∞
3. –ï—Å–ª–∏ –∫—ç—à–∞ –Ω–µ—Ç ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞!

#### 4. **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

–í –∞–¥–º–∏–Ω–∫–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ:

```typescript
onMutate: (newData) => {
  // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å—Ä–∞–∑—É (–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ)
  updateCache(newData)
}
onError: (previousData) => {
  // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º
  rollback(previousData)
}
```

#### 5. **Prefetching**

```typescript
// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
<Link onMouseEnter={() => prefetchPost(id)}>
```

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ß—Ç–æ –º—ã –¥–æ—Å—Ç–∏–≥–ª–∏:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –° React Query |
|---------|----------------|---------------|
| –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ | 1-2 —Å–µ–∫ | 1-2 —Å–µ–∫ |
| –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ | 1-2 —Å–µ–∫ | **0 –º—Å** (–∫—ç—à) |
| –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ | 500–º—Å | **0 –º—Å** |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ | 1 —Å–µ–∫ | **50–º—Å** (–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ) |
| –†–∞–±–æ—Ç–∞ offline | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Image Optimization**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebP —Ñ–æ—Ä–º–∞—Ç
   - –°–∂–∏–º–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN (Supabase Storage)

2. **Code Splitting**:
   - –ê–¥–º–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (lazy import)
   - –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ bundle

3. **Service Worker** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –ü–æ–ª–Ω–æ–µ offline –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - PWA –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS)

–ü–æ–ª–∏—Ç–∏–∫–∏ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `supabase-schema.sql`:

```sql
-- –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (–∞–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
CREATE POLICY "Allow public read access to site_content"
ON site_content FOR SELECT TO public USING (true);

-- –ó–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö (–∞–¥–º–∏–Ω–æ–≤)
CREATE POLICY "Allow authenticated users to update"
ON site_content FOR ALL TO authenticated USING (true);
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–î–ª—è production**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Supabase Auth –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
   - –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `admin_users`
   - –û–±–Ω–æ–≤–∏—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏

2. **API Keys**:
   - `anon key` - –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `service_role` key –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ!

3. **CORS**:
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Supabase
   - –î–ª—è production –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –≤ allowed origins

---

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏?)
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to fetch"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –ø—Ä–æ–µ–∫—Ç–∞ –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω –≤ Supabase
4. Fallback —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Üí –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage

### –ü—Ä–æ–±–ª–µ–º–∞: Slow loading

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Supabase Storage –≤–º–µ—Å—Ç–æ –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫
3. –í–∫–ª—é—á–∏—Ç–µ CDN –≤ Supabase Settings
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (React Query Devtools)

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### React Query Devtools

–í dev —Ä–µ–∂–∏–º–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏ (–Ω–∏–∂–Ω–∏–π –ª–µ–≤—ã–π —É–≥–æ–ª):
- –í–∏–¥–Ω—ã –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å—ã
- –ú–æ–∂–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à –≤—Ä—É—á–Ω—É—é
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –≤ –∫—ç—à–µ

### Supabase Dashboard

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
- **Database** ‚Üí **Activity** - –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- **Storage** ‚Üí Usage - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- **Logs** ‚Üí Functions - –æ—à–∏–±–∫–∏ –∏ warnings

---

## üéØ Best Practices

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

‚úÖ **–•–æ—Ä–æ—à–æ:**
```typescript
// –û–¥–∏–Ω –æ–±—ä–µ–∫—Ç —Å–æ –≤—Å–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
{ hero: {...}, benefits: [...], ... }
```

‚ùå **–ü–ª–æ—Ö–æ:**
```typescript
// –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫
{ key: 'hero_title', value: '...' }
{ key: 'hero_desc', value: '...' }
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

‚úÖ **–•–æ—Ä–æ—à–æ:**
```typescript
// –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
updateContent({ hero: { ...hero, title: newTitle } })
```

‚ùå **–ü–ª–æ—Ö–æ:**
```typescript
// –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤–µ—Å—å –æ–±—ä–µ–∫—Ç
updateContent({ hero: newHero })
```

### 3. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

‚úÖ **–•–æ—Ä–æ—à–æ:**
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º Supabase Storage
const { data } = await supabase.storage
  .from('images')
  .upload('hero.jpg', file)
```

‚ùå **–ü–ª–æ—Ö–æ:**
```typescript
// –•—Ä–∞–Ω–∏–º base64 –≤ –ë–î (—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π)
content: { image: 'data:image/jpeg;base64,...' }
```

---

## üîÑ Workflow –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### Development
1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ —Å `.env`
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ dev –ø—Ä–æ–µ–∫—Ç–µ Supabase
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Staging
1. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π Supabase –ø—Ä–æ–µ–∫—Ç –¥–ª—è staging
2. –ü—Ä–æ–≥–æ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
3. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ

### Production
1. –°–æ–∑–¥–∞–π—Ç–µ production Supabase –ø—Ä–æ–µ–∫—Ç
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ custom domain
3. –í–∫–ª—é—á–∏—Ç–µ CDN
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ backup (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Supabase Pro)
5. Deploy –Ω–∞ Vercel/Netlify/VPS

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```typescript
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
supabase
  .channel('content-changes')
  .on('postgres_changes', 
    { event: '*', schema: 'public', table: 'site_content' },
    (payload) => {
      queryClient.invalidateQueries(['site-content'])
    }
  )
  .subscribe()
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ù–µ—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### 2. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

```sql
-- –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
CREATE TABLE content_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  content_id UUID REFERENCES site_content(id),
  data JSONB NOT NULL,
  changed_by TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∞—É–¥–∏—Ç

### 3. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
interface SiteContent {
  version: string  // "1.0.0"
  data: { ... }
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 4. Multi-language

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
CREATE TABLE translations (
  id UUID PRIMARY KEY,
  key TEXT NOT NULL,
  lang TEXT NOT NULL,  -- 'en', 'ru', 'kz'
  value TEXT NOT NULL,
  UNIQUE(key, lang)
);
```

---

## üì± Supabase Storage –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Storage

1. –í Supabase Dashboard ‚Üí **Storage**
2. –°–æ–∑–¥–∞–π—Ç–µ bucket: `inteca-images`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø
4. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏:

```sql
-- –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
CREATE POLICY "Public Access"
ON storage.objects FOR SELECT
USING (bucket_id = 'inteca-images');

-- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
CREATE POLICY "Authenticated upload"
ON storage.objects FOR INSERT
WITH CHECK (bucket_id = 'inteca-images' AND auth.role() = 'authenticated');
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∞–¥–º–∏–Ω–∫–µ

```typescript
const uploadImage = async (file: File) => {
  const fileName = `${Date.now()}-${file.name}`
  const { data, error } = await supabase.storage
    .from('inteca-images')
    .upload(fileName, file)
  
  if (error) throw error
  
  // –ü–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π URL
  const { data: { publicUrl } } = supabase.storage
    .from('inteca-images')
    .getPublicUrl(fileName)
  
  return publicUrl
}
```

---

## üé® –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Browser   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚Üí React Query (–ö—ç—à 5-10 –º–∏–Ω)
       ‚îÇ   ‚îî‚îÄ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∑ –∫—ç—à–∞ (0ms)
       ‚îÇ
       ‚îú‚îÄ‚Üí localStorage (Fallback –∫—ç—à)
       ‚îÇ   ‚îî‚îÄ‚Üí –ï—Å–ª–∏ Supabase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
       ‚îÇ
       ‚îî‚îÄ‚Üí Supabase API
           ‚îú‚îÄ‚Üí site_content (JSON)
           ‚îú‚îÄ‚Üí blog_posts (Relational)
           ‚îî‚îÄ‚Üí Storage (Images)
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:

**–ß—Ç–µ–Ω–∏–µ:**
1. React Query –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à
2. –ï—Å–ª–∏ –∫—ç—à —Å–≤–µ–∂–∏–π ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ (0ms)
3. –ï—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ + –≥—Ä—É–∑–∏–º –Ω–æ–≤—ã–µ –≤ —Ñ–æ–Ω–µ
4. –ï—Å–ª–∏ –Ω–µ—Ç –∫—ç—à–∞ ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ Supabase
5. –ï—Å–ª–∏ Supabase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –±–µ—Ä–µ–º –∏–∑ localStorage
6. –ï—Å–ª–∏ localStorage –ø—É—Å—Ç ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ó–∞–ø–∏—Å—å (–∞–¥–º–∏–Ω–∫–∞):**
1. –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º UI (50ms)
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Supabase –≤ —Ñ–æ–Ω–µ
3. –ï—Å–ª–∏ —É—Å–ø–µ—Ö ‚Üí –æ–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º UI + –ø–æ–∫–∞–∑—ã–≤–∞–µ–º alert

---

## üö¶ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### 1. Online + Supabase –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ Supabase
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ React Query
- ‚úÖ localStorage fallback
- ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–∏–∑ –∫—ç—à–∞)

### 2. Offline / Supabase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ localStorage
- ‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ
- ‚ÑπÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏

### 3. Supabase –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (.env –ø—É—Å—Ç)
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ localStorage (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚ÑπÔ∏è –ë–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

---

## üìù Checklist –¥–ª—è –∑–∞–ø—É—Å–∫–∞

- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ–µ–∫—Ç –≤ Supabase
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ SQL –º–∏–≥—Ä–∞—Ü–∏—è (`supabase-schema.sql`)
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env` —Å –∫–ª—é—á–∞–º–∏
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ `npm install`
- [ ] –ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—â–µ–Ω (`npm run dev`)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –≤—Ö–æ–¥ –≤ `/admin`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (React Query Devtools)

---

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Supabase Documentation](https://supabase.com/docs)
- [React Query Documentation](https://tanstack.com/query)
- [Row Level Security Guide](https://supabase.com/docs/guides/auth/row-level-security)
- [Supabase Storage Guide](https://supabase.com/docs/guides/storage)

---

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ React Query Devtools
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –≤ DevTools
4. –ß–∏—Ç–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –≤ Console

